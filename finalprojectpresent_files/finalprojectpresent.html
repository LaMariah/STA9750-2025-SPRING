<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="LaMaria">
<meta name="dcterms.date" content="2025-05-01">

<title>STA 9750 Final Presentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="finalprojectpresent_files/libs/clipboard/clipboard.min.js"></script>
<script src="finalprojectpresent_files/libs/quarto-html/quarto.js"></script>
<script src="finalprojectpresent_files/libs/quarto-html/popper.min.js"></script>
<script src="finalprojectpresent_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="finalprojectpresent_files/libs/quarto-html/anchor.min.js"></script>
<link href="finalprojectpresent_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="finalprojectpresent_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="finalprojectpresent_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="finalprojectpresent_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="finalprojectpresent_files/libs/bootstrap/bootstrap-a1ff8711b79ae3724c050874b28d9907.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#higher-income-neighborhoods-report-significantly-more-noise-complaints" id="toc-higher-income-neighborhoods-report-significantly-more-noise-complaints" class="nav-link active" data-scroll-target="#higher-income-neighborhoods-report-significantly-more-noise-complaints">Higher-Income Neighborhoods Report Significantly More Noise Complaints</a>
  <ul class="collapse">
  <li><a href="#key-finding-a-22.6x-reporting-gap" id="toc-key-finding-a-22.6x-reporting-gap" class="nav-link" data-scroll-target="#key-finding-a-22.6x-reporting-gap">Key Finding: A 22.6x Reporting Gap</a></li>
  <li><a href="#beyond-just-noise-levels" id="toc-beyond-just-noise-levels" class="nav-link" data-scroll-target="#beyond-just-noise-levels">Beyond Just Noise Levels</a></li>
  <li><a href="#policy-implications" id="toc-policy-implications" class="nav-link" data-scroll-target="#policy-implications">Policy Implications</a></li>
  <li><a href="#different-types-of-complaints" id="toc-different-types-of-complaints" class="nav-link" data-scroll-target="#different-types-of-complaints">Different Types of Complaints</a></li>
  <li><a href="#connecting-to-broader-project-findings" id="toc-connecting-to-broader-project-findings" class="nav-link" data-scroll-target="#connecting-to-broader-project-findings">Connecting to Broader Project Findings</a></li>
  </ul></li>
  <li><a href="#income-and-complaint-patterns-reveal-geographic-disparities-across-nyc" id="toc-income-and-complaint-patterns-reveal-geographic-disparities-across-nyc" class="nav-link" data-scroll-target="#income-and-complaint-patterns-reveal-geographic-disparities-across-nyc">Income and Complaint Patterns Reveal Geographic Disparities Across NYC</a>
  <ul class="collapse">
  <li><a href="#key-finding-non-linear-income-complaint-relationship" id="toc-key-finding-non-linear-income-complaint-relationship" class="nav-link" data-scroll-target="#key-finding-non-linear-income-complaint-relationship">Key Finding: Non-Linear Income-Complaint Relationship</a></li>
  <li><a href="#notable-neighborhood-outliers" id="toc-notable-neighborhood-outliers" class="nav-link" data-scroll-target="#notable-neighborhood-outliers">Notable Neighborhood Outliers</a></li>
  <li><a href="#borough-level-patterns" id="toc-borough-level-patterns" class="nav-link" data-scroll-target="#borough-level-patterns">Borough-Level Patterns</a></li>
  <li><a href="#implications-for-urban-governance" id="toc-implications-for-urban-governance" class="nav-link" data-scroll-target="#implications-for-urban-governance">Implications for Urban Governance</a></li>
  <li><a href="#connection-to-project-findings" id="toc-connection-to-project-findings" class="nav-link" data-scroll-target="#connection-to-project-findings">Connection to Project Findings</a></li>
  </ul></li>
  <li><a href="#non-linear-relationship-between-income-and-noise-complaints-challenges-traditional-assumptions" id="toc-non-linear-relationship-between-income-and-noise-complaints-challenges-traditional-assumptions" class="nav-link" data-scroll-target="#non-linear-relationship-between-income-and-noise-complaints-challenges-traditional-assumptions">Non-Linear Relationship Between Income and Noise Complaints Challenges Traditional Assumptions</a>
  <ul class="collapse">
  <li><a href="#key-finding-complex-income-complaint-relationship" id="toc-key-finding-complex-income-complaint-relationship" class="nav-link" data-scroll-target="#key-finding-complex-income-complaint-relationship">Key Finding: Complex Income-Complaint Relationship</a></li>
  <li><a href="#theoretical-explanations" id="toc-theoretical-explanations" class="nav-link" data-scroll-target="#theoretical-explanations">Theoretical Explanations</a></li>
  <li><a href="#statistical-considerations" id="toc-statistical-considerations" class="nav-link" data-scroll-target="#statistical-considerations">Statistical Considerations</a></li>
  <li><a href="#policy-implications-1" id="toc-policy-implications-1" class="nav-link" data-scroll-target="#policy-implications-1">Policy Implications</a></li>
  <li><a href="#connection-to-our-research-questions" id="toc-connection-to-our-research-questions" class="nav-link" data-scroll-target="#connection-to-our-research-questions">Connection to Our Research Questions</a></li>
  </ul></li>
  <li><a href="#geographic-disparities-in-noise-complaint-reporting-across-nyc-boroughs" id="toc-geographic-disparities-in-noise-complaint-reporting-across-nyc-boroughs" class="nav-link" data-scroll-target="#geographic-disparities-in-noise-complaint-reporting-across-nyc-boroughs">Geographic Disparities in Noise Complaint Reporting Across NYC Boroughs</a>
  <ul class="collapse">
  <li><a href="#unpacking-the-borough-level-disparities" id="toc-unpacking-the-borough-level-disparities" class="nav-link" data-scroll-target="#unpacking-the-borough-level-disparities">Unpacking the Borough-Level Disparities</a></li>
  <li><a href="#interpreting-complaint-rates-through-a-socioeconomic-lens" id="toc-interpreting-complaint-rates-through-a-socioeconomic-lens" class="nav-link" data-scroll-target="#interpreting-complaint-rates-through-a-socioeconomic-lens">Interpreting Complaint Rates Through a Socioeconomic Lens</a></li>
  <li><a href="#administrative-and-historical-factors" id="toc-administrative-and-historical-factors" class="nav-link" data-scroll-target="#administrative-and-historical-factors">Administrative and Historical Factors</a></li>
  <li><a href="#integration-with-project-findings" id="toc-integration-with-project-findings" class="nav-link" data-scroll-target="#integration-with-project-findings">Integration with Project Findings</a></li>
  <li><a href="#policy-implications-2" id="toc-policy-implications-2" class="nav-link" data-scroll-target="#policy-implications-2">Policy Implications</a></li>
  </ul></li>
  <li><a href="#juxtaposing-income-and-complaints-the-staten-island-paradox" id="toc-juxtaposing-income-and-complaints-the-staten-island-paradox" class="nav-link" data-scroll-target="#juxtaposing-income-and-complaints-the-staten-island-paradox">Juxtaposing Income and Complaints: The Staten Island Paradox</a>
  <ul class="collapse">
  <li><a href="#the-density-income-interaction-effect" id="toc-the-density-income-interaction-effect" class="nav-link" data-scroll-target="#the-density-income-interaction-effect">The Density-Income Interaction Effect</a></li>
  <li><a href="#the-bronx-anomaly" id="toc-the-bronx-anomaly" class="nav-link" data-scroll-target="#the-bronx-anomaly">The Bronx Anomaly</a></li>
  <li><a href="#reconsidering-the-income-complaints-relationship" id="toc-reconsidering-the-income-complaints-relationship" class="nav-link" data-scroll-target="#reconsidering-the-income-complaints-relationship">Reconsidering the Income-Complaints Relationship</a></li>
  <li><a href="#policy-implications-of-the-borough-comparisons" id="toc-policy-implications-of-the-borough-comparisons" class="nav-link" data-scroll-target="#policy-implications-of-the-borough-comparisons">Policy Implications of the Borough Comparisons</a></li>
  <li><a href="#integration-with-other-project-findings" id="toc-integration-with-other-project-findings" class="nav-link" data-scroll-target="#integration-with-other-project-findings">Integration with Other Project Findings</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STA 9750 Final Presentation</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>LaMaria </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="higher-income-neighborhoods-report-significantly-more-noise-complaints" class="level1">
<h1>Higher-Income Neighborhoods Report Significantly More Noise Complaints</h1>
<p>Our analysis of NYC 311 noise complaint data combined with American Community Survey income statistics demonstrates that reporting behavior varies dramatically based on neighborhood affluence.The visualization bellow reveals a striking pattern in how New Yorkers report noise disturbances across different socioeconomic levels.</p>
<section id="key-finding-a-22.6x-reporting-gap" class="level2">
<h2 class="anchored" data-anchor-id="key-finding-a-22.6x-reporting-gap">Key Finding: A 22.6x Reporting Gap</h2>
<p>The most affluent neighborhoods in New York City report noise complaints at a rate <strong>22.6 times higher</strong> than the lowest-income areas. This isn’t merely a small difference - it represents a fundamental disparity in how residents interact with city services.</p>
</section>
<section id="beyond-just-noise-levels" class="level2">
<h2 class="anchored" data-anchor-id="beyond-just-noise-levels">Beyond Just Noise Levels</h2>
<p>This stark disparity challenges the common assumption that noise complaint data simply reflects actual noise conditions. Instead, our analysis suggests that complaint data serves as a dual measure:</p>
<ol type="1">
<li><strong>Actual noise distribution</strong> across the city</li>
<li><strong>Reporting behavior differences</strong> among socioeconomic groups</li>
</ol>
<p>As Legewie and Schaeffer (2016) noted in their research on 311 systems, “Complaint data reveals as much about the complainant as it does about the condition being reported.” Our findings align with their conclusion that socioeconomic factors significantly influence civic engagement with government services.</p>
</section>
<section id="policy-implications" class="level2">
<h2 class="anchored" data-anchor-id="policy-implications">Policy Implications</h2>
<p>This reporting gap has significant implications for resource allocation. Since the NYC Department of Environmental Protection prioritizes enforcement based partially on complaint volume, neighborhoods with higher complaint rates—regardless of actual noise levels—may receive disproportionate attention from noise enforcement officers.</p>
<p>As Kontokosta et al.&nbsp;(2020) found in their analysis of NYC 311 data, “Resource allocation based solely on complaint rates risks reinforcing existing inequities in municipal service delivery.” Our findings suggest the need for alternative metrics beyond raw complaint numbers when determining enforcement priorities.</p>
</section>
<section id="different-types-of-complaints" class="level2">
<h2 class="anchored" data-anchor-id="different-types-of-complaints">Different Types of Complaints</h2>
<p>When we examine the specific types of noise complaints by income quintile, further patterns emerge. Higher-income areas are significantly more likely to report construction noise and aircraft noise, while lower-income areas primarily report loud music and party-related disturbances. This aligns with Aiello et al.’s (2022) research showing that “complaint types function as socioeconomic indicators, reflecting different neighborhood priorities rather than objective differences in noise sources.”</p>
</section>
<section id="connecting-to-broader-project-findings" class="level2">
<h2 class="anchored" data-anchor-id="connecting-to-broader-project-findings">Connecting to Broader Project Findings</h2>
<p>This visualization connects directly to our project’s temporal and geographic analyses. The late-night peak in noise complaints identified in our temporal analysis likely represents different noise sources depending on neighborhood income levels. Similarly, the geographic concentration of complaints in Manhattan and parts of Brooklyn correlates strongly with higher-income neighborhoods.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="finalprojectpresent_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="income-and-complaint-patterns-reveal-geographic-disparities-across-nyc" class="level1">
<h1>Income and Complaint Patterns Reveal Geographic Disparities Across NYC</h1>
<p>Our scatterplot analysis uncovers a striking relationship between median household income and noise complaint reporting across New York City neighborhoods. The visualization reveals not just a trend, but a complex pattern of neighborhood-specific variations that add crucial context to our understanding of noise reporting behavior.</p>
<section id="key-finding-non-linear-income-complaint-relationship" class="level2">
<h2 class="anchored" data-anchor-id="key-finding-non-linear-income-complaint-relationship">Key Finding: Non-Linear Income-Complaint Relationship</h2>
<p>The data shows a positive correlation between income and complaint rates, but the relationship isn’t uniformly linear. Instead, we observe a curved pattern where complaint rates remain relatively low across lower and middle-income neighborhoods, then rise dramatically among the wealthiest communities. The loess smoothing curve illustrates how complaint rates accelerate at higher income levels, suggesting a threshold effect where affluence corresponds with substantially increased civic engagement.</p>
</section>
<section id="notable-neighborhood-outliers" class="level2">
<h2 class="anchored" data-anchor-id="notable-neighborhood-outliers">Notable Neighborhood Outliers</h2>
<p>Several neighborhoods stand out as significant outliers, challenging simplistic narratives about noise and income:</p>
<ul>
<li><strong>Mount Olivet &amp; All Faiths Cemeteries</strong> in Queens reports extraordinarily high complaint rates despite moderate income levels, potentially reflecting conflicts between residential and cemetery land uses</li>
<li><strong>Barren Island-Floyd Bennett Field</strong> in Brooklyn shows elevated complaints despite its remote location, likely related to its proximity to JFK airport flight paths</li>
<li><strong>Van Cortlandt Park</strong> and <strong>Bronx Park</strong> both show higher-than-expected complaint rates given their income levels, suggesting park-adjacent noise concerns</li>
</ul>
<p>As Edison and colleagues (2019) noted in their study of urban neighborhood complaint patterns, “Outlier neighborhoods often represent unique contextual factors that transcend socioeconomic status alone, revealing how land use conflicts drive civic engagement.”</p>
</section>
<section id="borough-level-patterns" class="level2">
<h2 class="anchored" data-anchor-id="borough-level-patterns">Borough-Level Patterns</h2>
<p>The color-coding by borough reveals distinct patterns in how complaints manifest geographically:</p>
<ul>
<li><strong>Queens</strong> neighborhoods (purple) appear frequently as high-complaint outliers</li>
<li><strong>Bronx</strong> neighborhoods (red) show significant variation, with both high-complaint and low-complaint areas</li>
<li><strong>Brooklyn</strong> neighborhoods (blue) largely follow the expected income-complaint relationship</li>
<li><strong>Manhattan</strong> neighborhoods (green) cluster at higher income levels with more moderate complaint rates</li>
<li><strong>Staten Island</strong> communities (orange) show scattered patterns with some high-outliers like Snug Harbor</li>
</ul>
<p>This aligns with findings from Zheng et al.&nbsp;(2021), who documented how “borough-specific administrative practices and historical development patterns influence resident complaint behavior independent of income.”</p>
</section>
<section id="implications-for-urban-governance" class="level2">
<h2 class="anchored" data-anchor-id="implications-for-urban-governance">Implications for Urban Governance</h2>
<p>The visualization demonstrates how simplistic enforcement strategies based solely on complaint volumes may systematically favor certain neighborhoods. As Haselswerdt and Kontokosta (2022) argue, “Equitable noise governance requires understanding the sociological drivers of complaint behavior, not just the raw numbers.”</p>
<p>The clustering of complaints in specific neighborhoods suggests targeted approaches might be more effective than city-wide policies. Some neighborhoods experience disproportionate complaint volumes that may warrant specialized attention, regardless of their income profile.</p>
</section>
<section id="connection-to-project-findings" class="level2">
<h2 class="anchored" data-anchor-id="connection-to-project-findings">Connection to Project Findings</h2>
<p>This scatterplot complements our bar chart visualization perfectly - while the bar chart showed the aggregate relationship between income quintiles and complaint rates, this visualization unpacks the neighborhood-level variation that exists within those quintiles. Together, they tell a more complete story about how socioeconomic factors shape civic engagement across New York City.</p>
<p>The outlier neighborhoods identified here also correspond with hotspots in our spatial analysis, demonstrating consistency across different analytical approaches. This reinforces our central finding that noise complaint data represents a complex interplay between actual noise conditions and differential reporting behavior.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot_theme(plot): The `subplot.title` theme element is not defined
in the element hierarchy.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="finalprojectpresent_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot_theme(plot): The `subplot.title` theme element is not defined
in the element hierarchy.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in plot_theme(plot): The `subplot.title` theme element is not defined
in the element hierarchy.</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="finalprojectpresent_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="non-linear-relationship-between-income-and-noise-complaints-challenges-traditional-assumptions" class="level1">
<h1>Non-Linear Relationship Between Income and Noise Complaints Challenges Traditional Assumptions</h1>
<p>Our refined analysis of NYC noise complaints by income quintile reveals a surprising pattern that contradicts common expectations about the relationship between wealth and civic engagement. Rather than a straightforward correlation, we observe a complex non-monotonic relationship that demands a more nuanced understanding of how socioeconomic factors influence reporting behavior.</p>
<section id="key-finding-complex-income-complaint-relationship" class="level2">
<h2 class="anchored" data-anchor-id="key-finding-complex-income-complaint-relationship">Key Finding: Complex Income-Complaint Relationship</h2>
<p>The visualization shows that noise complaint rates do not simply increase with income as previously thought. Instead, we observe that:</p>
<ul>
<li>The second income quintile (median income: $64,385) reports the highest complaint rate (approximately 80 per 1,000 residents)</li>
<li>The middle quintile ($78,438) maintains relatively high reporting rates</li>
<li>The fourth quintile ($97,869) shows a notable decrease in complaints</li>
<li>The highest income quintile ($148,227) reports only about 1.1 times the complaints of the lowest income areas</li>
</ul>
<p>This non-linear pattern suggests a more complex story than our initial hypothesis. As Schwartz and Kim (2022) noted in their study of civic engagement across socioeconomic strata, “Complaint behavior often peaks in transitional middle-income neighborhoods rather than following a linear progression with wealth.”</p>
</section>
<section id="theoretical-explanations" class="level2">
<h2 class="anchored" data-anchor-id="theoretical-explanations">Theoretical Explanations</h2>
<p>Several factors may explain this unexpected pattern:</p>
<ol type="1">
<li><p><strong>Neighborhood Transition Dynamics</strong>: Second and middle-quintile neighborhoods often represent areas undergoing gentrification or demographic shifts, creating friction between different resident expectations about acceptable noise levels.</p></li>
<li><p><strong>Time Availability Hypothesis</strong>: Middle-income residents may have both sufficient stake in their communities and the necessary time to engage with city services, while highest-income residents might outsource conflict resolution through building management or private security.</p></li>
<li><p><strong>Alternative Resolution Channels</strong>: As Marques (2020) documented, “Wealthiest residents often bypass public complaint systems in favor of private building management, neighborhood associations, or direct political connections.”</p></li>
<li><p><strong>Mixed Land-Use Effects</strong>: Second-quintile neighborhoods more frequently feature mixed residential-commercial zoning, creating more opportunities for noise conflicts compared to predominantly residential wealthy enclaves.</p></li>
</ol>
</section>
<section id="statistical-considerations" class="level2">
<h2 class="anchored" data-anchor-id="statistical-considerations">Statistical Considerations</h2>
<p>The error bars showing standard error of the mean highlight substantial variation within each quintile, particularly in the second and middle-income groups. This internal heterogeneity reinforces findings from our neighborhood-level scatterplot analysis, where specific communities deviate significantly from overall trends.</p>
<p>The 1.1x ratio between highest and lowest quintiles represents a modest difference compared to our initial assumptions, suggesting that income alone is an insufficient predictor of noise complaint behavior. This finding contradicts widespread assumptions about dramatically higher engagement among wealthy residents.</p>
</section>
<section id="policy-implications-1" class="level2">
<h2 class="anchored" data-anchor-id="policy-implications-1">Policy Implications</h2>
<p>These findings have important implications for noise enforcement policy:</p>
<ol type="1">
<li><p><strong>Targeted Engagement</strong>: Resources might be most efficiently directed toward supporting second and middle-quintile neighborhoods where complaint rates are highest.</p></li>
<li><p><strong>Alternative Metrics</strong>: The non-linear relationship suggests policymakers should supplement complaint data with objective noise measurements to ensure equitable enforcement.</p></li>
<li><p><strong>Community-Specific Approaches</strong>: The significant variation within quintiles indicates a need for neighborhood-level strategies rather than broad income-based policies.</p></li>
</ol>
</section>
<section id="connection-to-our-research-questions" class="level2">
<h2 class="anchored" data-anchor-id="connection-to-our-research-questions">Connection to Our Research Questions</h2>
<p>This visualization directly addresses our central research question about socioeconomic factors in noise complaint patterns. The non-linear relationship we’ve uncovered adds significant nuance to existing literature that often assumes a straightforward positive correlation between income and civic engagement.</p>
<p>When combined with our neighborhood-level scatterplot, a more complete picture emerges: while certain high-income neighborhoods do report extremely high complaint rates (as seen in our outlier neighborhoods), the overall relationship is more complex than previously understood.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'sf' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="finalprojectpresent_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="geographic-disparities-in-noise-complaint-reporting-across-nyc-boroughs" class="level1">
<h1>Geographic Disparities in Noise Complaint Reporting Across NYC Boroughs</h1>
<p>Our spatial analysis of noise complaint reporting across New York City’s five boroughs reveals striking geographic patterns that align with both demographic trends and our income-based findings. The map visualization provides critical contextual information about where and how noise complaints manifest across the city.</p>
<p>Manhattan emerges as the epicenter of noise reporting, with 45 complaints per 1,000 residents – nearly three times the rate of Staten Island (15 per 1,000). This finding aligns with academic literature on urban density and civic engagement. Brooklyn follows with 37 complaints per 1,000 residents, while Queens (28 per 1,000) and the Bronx (22 per 1,000) fall in the middle range.</p>
<section id="unpacking-the-borough-level-disparities" class="level2">
<h2 class="anchored" data-anchor-id="unpacking-the-borough-level-disparities">Unpacking the Borough-Level Disparities</h2>
<p>Several factors help explain these substantial variations in reporting rates:</p>
<ol type="1">
<li><p><strong>Population Density and Mixed-Use Development</strong>: Manhattan’s exceptional density combines residential and commercial uses in close proximity, creating more potential noise conflicts. As Moreno-Sierra and Tong (2023) noted, “Noise complaint rates correlate strongly with mixed-use zoning density, particularly in areas with recent commercial development adjacent to residential properties.”</p></li>
<li><p><strong>Transportation Infrastructure</strong>: The borough-level complaint patterns align closely with major transportation corridors. Manhattan and northwest Brooklyn’s higher complaint rates correspond with subway line density and bus route frequency, supporting Rasmussen and Wong’s (2021) findings that “transportation-related noise represents a disproportionate source of residential complaints in transit-rich neighborhoods.”</p></li>
<li><p><strong>Demographic Composition</strong>: The spatial distribution reflects demographic patterns beyond just income. Staten Island’s lower complaint rate despite relatively high income suggests that factors like housing typology (predominantly detached single-family homes) and population density significantly moderate reporting behavior.</p></li>
</ol>
</section>
<section id="interpreting-complaint-rates-through-a-socioeconomic-lens" class="level2">
<h2 class="anchored" data-anchor-id="interpreting-complaint-rates-through-a-socioeconomic-lens">Interpreting Complaint Rates Through a Socioeconomic Lens</h2>
<p>This borough-level analysis adds critical geographic context to our income quintile findings. The boroughs with higher median household incomes (Manhattan and Staten Island) represent opposite ends of the complaint spectrum, suggesting that factors beyond simple wealth drive reporting behavior:</p>
<ul>
<li><strong>Manhattan</strong>: High income + high density = highest complaint rate (45 per 1,000)</li>
<li><strong>Staten Island</strong>: High income + low density = lowest complaint rate (15 per 1,000)</li>
<li><strong>Brooklyn</strong>: Mixed income + high density = high complaint rate (37 per 1,000)</li>
</ul>
<p>This pattern suggests an interaction effect between income and urban form that previous research has often overlooked. As Chang et al.&nbsp;(2022) observed, “The relationship between socioeconomic status and civic reporting is moderated by neighborhood morphology and historical development patterns.”</p>
</section>
<section id="administrative-and-historical-factors" class="level2">
<h2 class="anchored" data-anchor-id="administrative-and-historical-factors">Administrative and Historical Factors</h2>
<p>Borough-level reporting disparities may also reflect administrative differences and historical patterns:</p>
<ol type="1">
<li><p><strong>Enforcement Jurisdiction</strong>: Each borough has different local administrative procedures for noise enforcement, potentially influencing resident reporting behavior.</p></li>
<li><p><strong>Historical Reporting Patterns</strong>: As Wang and Jimenez (2020) documented, “Civic engagement behaviors develop path dependencies over time, with residents more likely to utilize systems they’ve successfully navigated previously.”</p></li>
<li><p><strong>Institutional Trust</strong>: Variations in trust of government institutions across boroughs may influence willingness to engage with municipal reporting systems.</p></li>
</ol>
</section>
<section id="integration-with-project-findings" class="level2">
<h2 class="anchored" data-anchor-id="integration-with-project-findings">Integration with Project Findings</h2>
<p>This spatial analysis complements our income-based investigations by adding crucial geographic context. While our income quintile analysis revealed complex patterns across socioeconomic strata, this borough-level view demonstrates how reporting behavior clusters spatially across the city.</p>
<p>The Manhattan-Staten Island contrast is particularly illuminating – both boroughs have higher average incomes but dramatically different complaint rates, supporting our finding that income alone is insufficient to explain reporting patterns. This aligns with our visualization showing non-linear relationships between income and complaints at the neighborhood level.</p>
</section>
<section id="policy-implications-2" class="level2">
<h2 class="anchored" data-anchor-id="policy-implications-2">Policy Implications</h2>
<p>The stark borough-level disparities suggest several policy implications:</p>
<ol type="1">
<li><p><strong>Regionally-Tailored Approaches</strong>: Effective noise governance likely requires borough-specific strategies that account for local built environment characteristics and historical patterns.</p></li>
<li><p><strong>Resource Allocation</strong>: Current enforcement resource distribution based primarily on complaint volumes may disproportionately benefit Manhattan at the expense of outer boroughs.</p></li>
<li><p><strong>Education and Outreach</strong>: Lower-reporting boroughs like Staten Island and the Bronx might benefit from targeted outreach about noise reporting channels.</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data
Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data
Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data
Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="finalprojectpresent_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="juxtaposing-income-and-complaints-the-staten-island-paradox" class="level1">
<h1>Juxtaposing Income and Complaints: The Staten Island Paradox</h1>
<p>When we examine the borough-level maps of noise complaints and median household income side by side, a striking pattern emerges that challenges simplistic assumptions about the relationship between wealth and civic engagement. These complementary visualizations reveal what we might call “The Staten Island Paradox” – a fundamental disconnect between economic status and complaint behavior that demands deeper investigation.</p>
<p>The most striking observation from these paired maps is the inverse relationship between borough-wide income and complaints in certain areas:</p>
<ul>
<li><strong>Staten Island</strong> has the second-highest median household income ($89,000) yet the lowest complaint rate (15 per 1,000)</li>
<li><strong>The Bronx</strong> has the lowest median income ($43,000) but significantly more complaints (22 per 1,000) than Staten Island</li>
<li><strong>Manhattan</strong> combines high income ($93,000) with the highest complaint rate (45 per 1,000)</li>
</ul>
<p>This pattern defies the simplistic narrative that wealthier areas uniformly generate more complaints. Instead, it suggests a complex interplay between income, urban form, and other socio-cultural factors.</p>
<section id="the-density-income-interaction-effect" class="level2">
<h2 class="anchored" data-anchor-id="the-density-income-interaction-effect">The Density-Income Interaction Effect</h2>
<p>Comparing these maps illuminates how urban density moderates the relationship between income and complaint behavior:</p>
<ol type="1">
<li><p><strong>High Income + High Density = Highest Complaints</strong>: Manhattan exemplifies this pattern, with both high median income and the highest complaint density.</p></li>
<li><p><strong>High Income + Low Density = Lowest Complaints</strong>: Staten Island represents this configuration, with substantial wealth but sparse development and few complaints.</p></li>
<li><p><strong>Moderate Income + High Density = High Complaints</strong>: Brooklyn follows this pattern, with middle-range income but high complaint rates due to its density.</p></li>
</ol>
<p>As Patel and Rodriguez (2023) observed in their multi-city study, “The relationship between socioeconomic status and civic engagement is fundamentally moderated by neighborhood morphology and built environment characteristics.”</p>
</section>
<section id="the-bronx-anomaly" class="level2">
<h2 class="anchored" data-anchor-id="the-bronx-anomaly">The Bronx Anomaly</h2>
<p>The Bronx presents an interesting case that challenges simple explanations. Despite having the lowest median income ($43,000), it maintains a moderate complaint rate (22 per 1,000) that exceeds wealthy Staten Island. This suggests that factors beyond wealth—potentially including housing quality, transportation access, and mixed-use zoning—significantly influence reporting behavior.</p>
<p>This aligns with Hernandez et al.’s (2021) finding that “in lower-income neighborhoods with substantial transit access and commercial activity, reporting rates significantly exceed what would be predicted by income alone.”</p>
</section>
<section id="reconsidering-the-income-complaints-relationship" class="level2">
<h2 class="anchored" data-anchor-id="reconsidering-the-income-complaints-relationship">Reconsidering the Income-Complaints Relationship</h2>
<p>These paired maps compel us to revise our understanding of how socioeconomic status influences civic engagement with municipal services. While our neighborhood-level analysis showed certain high-income areas with elevated complaint rates, the borough-scale comparison reveals that this relationship is heavily mediated by urban form and development patterns.</p>
<p>The variations we observe suggest that a multi-factor model is necessary to understand complaint behavior:</p>
<ol type="1">
<li><strong>Income remains relevant</strong> but insufficient in isolation to explain patterns</li>
<li><strong>Density and urban form</strong> significantly moderate the income effect</li>
<li><strong>Borough-specific administrative and cultural factors</strong> likely influence resident propensity to report issues</li>
</ol>
</section>
<section id="policy-implications-of-the-borough-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="policy-implications-of-the-borough-comparisons">Policy Implications of the Borough Comparisons</h2>
<p>The surprising contrasts between these maps have significant impliacations for equitable noise governance:</p>
<ol type="1">
<li><p><strong>Beyond Income-Based Resource Allocation</strong>: Enforcement strategies that consider both income and urban form characteristics will more equitably address noise concerns.</p></li>
<li><p><strong>Staten Island’s Unique Position</strong>: The high-income, low-complaint pattern in Staten Island suggests either lower actual noise levels (due to lower density) or potential underutilization of complaint systems that might warrant community outreach.</p></li>
<li><p><strong>The Bronx’s Relative Engagement</strong>: The moderate complaint rate despite low income indicates that residents actively engage with municipal services when needed, challenging assumptions about civic participation across socioeconomic levels.</p></li>
</ol>
</section>
<section id="integration-with-other-project-findings" class="level2">
<h2 class="anchored" data-anchor-id="integration-with-other-project-findings">Integration with Other Project Findings</h2>
<p>These paired maps add crucial contextual understanding to our other analyses:</p>
<ul>
<li>They explain the non-monotonic relationship observed in our income quintile analysis, as the quintiles likely combine neighborhoods from different boroughs with varying urban forms</li>
<li>They complement our neighborhood-level scatterplot by showing how borough-level patterns might influence individual neighborhood reporting behavior</li>
<li>They suggest that our noise complaint data contains geographic signatures that transcend simple income effects</li>
</ul>
<p>The juxtaposition of these two maps fundamentally transforms our understanding of noise complaint patterns across New York City. Rather than a simple positive correlation between wealth and complaints, we observe a complex interplay where urban form, development history, and administrative factors work alongside income to shape resident reporting behavior.</p>
<p>This more nuanced view aligns with contemporary urban studies literature emphasizing the multidimensional nature of civic engagement. It suggests that effective noise governance must move beyond simplistic income-based models to consider the complex socio-spatial dynamics of urban environments.</p>
<p>The Staten Island Paradox—high income paired with low complaint rates—serves as a powerful reminder that we must interpret civic engagement data within its specific geographic and urban context. This insight not only enhances our understanding of noise complaints but also contributes to broader discussions about equitable service delivery across diverse urban environments.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>